<!DOCTYPE html>
<html>
    <head lang="en">
        <meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>PNB MetLife HR Chatbot</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
        <style type="text/css">
            
            .fixed-panel {
                min-height: 410px;
                max-height: 410px;
        		    background-color: white;
	            	color: #365f91;
                overflow: auto;

            }

            .media-list {
           		overflow: auto;
        			clear: both;
        			overflow-wrap: break-word;
        			word-break: normal;
        			line-break: strict;		
      			
            }

            .flex-container {
              padding: 0;
              margin: 0;
              list-style: none;
              -ms-box-orient: horizontal;
              display: -webkit-box;
              display: -moz-box;
              display: -ms-flexbox;
              display: -moz-flex;
              display: -webkit-flex;
              display: flex;
            }
                       
            .wrap    { 
              -webkit-flex-wrap: wrap;
              flex-wrap: wrap;
            }  
           
            .flex-item {
              padding:5px;
              width: 200px;
              font-size:1em;
              color: black;
            
            }

      			.panel {
          			background-color: #fff;
          			border: 3px ;
          			border-radius: 8px;
          			-webkit-box-shadow: 0 1px 1px rgba(0,0,0,.05);
          			box-shadow: 0 1px 1px rgba(0,0,0,.05);
      			}
      			
      			.panel-info {
      			    border-color: #0c2735;
      			}
      			.panel-info>.panel-heading {
          			color: white;
          			background-color: #0A3C6D;
          			border-color: #0c2735;
      			}
      			.panel-footer {
          			padding: 10px 15px;
          			background-color: white;
          			border-top: 1px solid #0c2735;
          			border-bottom-right-radius: 3px;
          			border-bottom-left-radius: 3px;
      			}
			
            .chat-output {
              overflow-wrap: break-word;
              background: #0FB0DF;
              color: white;
              padding: 12px 10px;
              border-radius: 10px;
            }
            
            .chat-input {
              padding:  10px;
              overflow-wrap: break-word;
              text-align: right;
              background: #F2F2F2;
              color:black;
              border-radius: 10px;
            }

            .time-input {
              text-align: right;
            }
            .div_spacing{
                margin-bottom: 200px;
            }

            .button1 {
                background-color: white; 
                color: black; 
                border-radius: 12px;
                border: 2px solid #4CAF50;
                transition-duration: 0.3s;
            }

            .button1:hover {
                background-color: #4CAF50;
                color: white;
            }

            .button2 {
                background-color: white; 
                color: black; 
                border-radius: 12px;
                border: 2px solid #008CBA;
                transition-duration: 0.3s;
            }

            .button2:hover {
                background-color: #008CBA;
                color: white;
            }

            .button3 {
                background-color: white; 
                color: black;
                border-radius: 12px; 
                border: 2px solid #f44336;
                transition-duration: 0.3s;
            }

            .button3:hover {
                background-color: #f44336;
                color: white;
            }
            .button4 {
                background-color: white;
                color: black;
                transition-duration: 0.3s;
                border-radius: 12px;
                border: 2px solid #e7e7e7;
            }

            .button4:hover {
              background-color: #e7e7e7; 
              
            }

            .button5 {
                background-color: white;
                color: black;
                transition-duration: 0.3s;
                border-radius: 12px;
                border: 2px solid #555555;
            }

            .button5:hover {
                background-color: #555555;
                color: white;
            }
            .btn-topic1{
              display: inline-block; 
              height: 50px;
              width: 180px;
          	}

			body {
			  background: #1B578D;
              font-size: 14px;
              font-family: 'Open Sans', sans-serif;
              color: #333;
              }

        </style>
    </head>
<body>
        <div class="container background-color: rgb(255,0,255);" id='yolo_div'>
            <div class="row">
                
                <div align="center">
                   <img style="max-width:25%; max-height:25%;" src="/static/pnb_logo.jpg" /> 
                </div>

                <div id='main_div2' style="display:none"  align='center'>
                   <img id="toggle_state" src="/static/bot.gif" height="150" size="150" /> 
                </div>
                <div class="col-md-10 col-md-offset-1" id='main_div1'>
				
                    <div id="chatPanel" class="panel panel-info">
                        <div class="panel-heading" align="center">
                            
                                <img style="max-width:5%; max-height:5%;" src="/static/bot.png" />&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
                                <span style="font-size: 22px;">PNB  MetLife  HR  Assist</span>
                            
                                <button id="btn7" class='button3' style="margin-top: 7px;float: right;">Close</button>

                                <button id="btn5" class='button2' style="margin: 7px; float: right;">Feedback</button>
    							
                                <button id="btn6" class='button1' style="margin-top: 7px;float: right;">Refresh</button>	
                                
                            <div style="clear: both;"></div>
						</div>
                        <div class="panel-body  fixed-panel">
                            <ul class="media-list flex-container wrap">
                            </ul>
                        </div>
                        <div class="panel-footer">
                            <form method="post" id="chatbot-form" autocomplete="off">
                                <div class="input-group">
                                    <input type="text" class="form-control" placeholder="Enter Message" name="messageText" id="messageText" autofocus/>
                                    <span class="input-group-btn">
                                        <button class="btn btn-info" type="button" id="chatbot-form-btn">SEND<span class="glyphicon glyphicon-hand-up"></span></button>
                                    </span>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>				
            </div>
        </div>
               
        <script type="text/javascript">
        function codeAddress() {
            var d = new Date();
            var n = d.getHours();

            var time = new Date();
            var timeString = ''+(time.getHours()) + ':' + (time.getMinutes());
                
            if (n<12){
                var resp = "Good Morning sir! I'm your HR chatbot and I am here to help you with your queries related to different Policy's. Have we interacted before?";
                  $('#messageText').val(resp);
				          $('#messageText').prop('disabled',true);
            }
            if (n>=12 && n<=17){
                var resp = "Good Afternoon sir! I'm your HR chatbot and I am here to help you with your queries related to different Policy's. Have we interacted before?";
                $('#messageText').val(resp);
				        $('#messageText').prop('disabled',true);
            }
            if (n>17){
                var resp = "Good Evening sir! I'm your HR chatbot and I am here to help you with your queries related to different Policy's. Have we interacted before?";
                $('#messageText').val(resp);
				        $('#messageText').prop('disabled',true);
            }
            var message = $('#messageText').val();    
            
            $(".media-list").append('<li class="media "><div class="media-body chat-output"><div class="media">' + message + '</div></div></li><br>');
            $(".fixed-panel").stop().animate({ scrollTop: $(".fixed-panel")[0].scrollHeight}, 1000);
            
            $('#messageText').prop('disabled',true);
            
            $(".media-list").append('<li class="media flex-item"><span class="r"><div class="media-body"><div class="media"><div class="media-body"><button id="btn4" class="btn-topic button5" value="yeah">Yes</button></div></div></div></span></li>');
            $(".fixed-panel").stop().animate({ scrollTop: $(".fixed-panel")[0].scrollHeight}, 1000);
            
            $(".media-list").append('<li class="media flex-item"><span class="r"><div class="media-body"><div class="media"><div class="media-body"><button id="btn4" class="btn-topic button5" value="nah">No</button></div></div></div></span></li>');
            $(".fixed-panel").stop().animate({ scrollTop: $(".fixed-panel")[0].scrollHeight}, 1000);
            
            $('#messageText').val("");
                            
        }
        
        window.onload = codeAddress;
        </script>
        <script src="http://code.jquery.com/jquery-1.12.4.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
        <script>
        $('.media-list').on('click', '#btn', function(){
		      $('#messageText').prop('disabled',false);
        	  $('#chatbot-form-btn').prop('disabled', false);
              $('#messageText').val(this.value);
              $(".r").remove();
              $('#chatbot-form').submit();
           
        });

        $('.media-list').on('click', '#btn10', function(){
              $('#messageText').prop('disabled',false);
              $('#chatbot-form-btn').prop('disabled', false);
              m=this.value;
              m=m.split('_').join(' ');
              $('#messageText').val(m);
              $(".r").remove();
              $('#chatbot-form').submit();
           
        });

        $('#messageText').prop('disabled',false);
		    $('#chatbot-form-btn').prop('disabled', false);

        $('.media-list').on('click', '#btn1', function(){
		    
            $('#messageText').prop('disabled',false);		
            $('#messageText').val((this.value));
            $(".r").remove();
            $('#chatbot-form').submit();
        });
        
        $('.media-list').on('click', '#btn2', function(){
		      $('#chatbot-form-btn').prop('disabled', false);
		      $('#messageText').val((this.value));
              $(".r").remove();         
              $('#chatbot-form').submit();
        });
        
        $('.media-list').on('click', '#btn3', function(){
		    $('#messageText').prop('disabled',false);
		    $('#chatbot-form-btn').prop('disabled', false);
            $(".r").remove();        
            $('#messageText').val((this.value));
            $('#chatbot-form').submit();
        });

        $('#messageText').prop('disabled',false);
		    $('#chatbot-form-btn').prop('disabled', false);
		
        $('.media-list').on('click', '#btn4', function(){
		    $('#messageText').prop('disabled',false);
		    $('#chatbot-form-btn').prop('disabled', false);
		    $(".r").remove();        
            $('#messageText').val((this.value));
            $('#chatbot-form').submit();
            
        });
        
        $('#btn5').click(function(){
            location.href = "/feedback";
        });
		    
        function see_all(x){
            var file_name=x;
            file_name=file_name.split('_').join('%20')
            file_name=file_name+'.pdf';
            
            window.open("/static/pdf_policy/"+file_name,'_blank');
        }

        function More(x,op,res){
            x=x.split('_').join(' ');
            res=res.split('_').join(' ');
            
            var tg="<span style='color:blue' onclick=see_all(\""+op+"\")><br> Please click here to see the policy. </span>"
            $(document).find('#extend_this').html('<li class="media"><div class="media-body chat-output"><div class="media"><div class="media-body">'+x+tg+res+'</div></div></div></li>');
        }
		
		    $('#btn6').click(function(){
			     location.href = "/chat";
        });


        $('#toggle_state').click(function(){
            var x = document.getElementById("main_div1");
            var y = document.getElementById("main_div2");
            var z = document.getElementById("spacing_div");
            
            if (x.style.display === "none") {
                x.style.display = "block";
                y.style.display = "none";
                z.style.display = "none";
            
            } else {
                x.style.display = "none";
                y.style.display = "block";    
                z.style.display = "block";
            }
        });

        $('#btn7').click(function(){
            location.href = "/";
        });

        function showHide() {
           var div = document.getElementById("hidden_div");
           if (div.style.display == 'none') {
             div.style.display = '';
           }
           else {
             div.style.display = 'none';
           }
        }
        
        $(function() {
            
            $('#chatbot-form-btn').click(function(e) {
                e.preventDefault();
                $('#chatbot-form').submit();
            });
            
            $('#chatbot-form').submit(function(e) {
                e.preventDefault();

                var message = $('#messageText').val();
                
                var time = new Date();
                var timeString = ''+(time.getHours()) + ':' + (time.getMinutes());

                 if (message=="nah-dont-see-logs"){
                    $(".media-list").append('<li class="media chat-input"><div class="media-body"><div class="media"><div class="media-body">No</div></div></div></li><div class="media-body time-input">'+timeString+'</div>');
                 }
                 else if((message=="yeah-see-logs")){
                    $(".media-list").append('<li class="media chat-input"><div class="media-body"><div class="media"><div class="media-body">Yes</div></div></div></li><div class="time-input">'+timeString+'</div>');
                 }
                 
                 else if((message=="yeah")){
                    $(".media-list").append('<li class="media chat-input"><div class="media-body"><div class="media"><div class="media-body">Yes</div></div></div></li>');
                 }
                 else if((message=="nah")){
                    $(".media-list").append('<li class="media chat-input"><div class="media-body"><div class="media"><div class="media-body">No</div></div></div></li>');
                 }
                 
                 else if((message=="start-again")){
                    $(".media-list").append('<li class="media chat-input"><div class="media-body"><div class="media"><div class="media-body">Yes</div></div></div></li>');
                 }
                 
                  else if((message=="dont-start-again")){
                    $(".media-list").append('<li class="media chat-input"><div class="media-body"><div class="media"><div class="media-body">No</div></div></div></li>');
                 }
         
                 else{
                  if (message.split('.')[2]=="xml " || message.split('.')[2]=="docx ")
                  { var split_by_bracket= message.split('(');
                    var split_by_dot= message.split('.');
                    if (split_by_bracket.length>1)
                    {
                      message=split_by_bracket[0];
                    }
                    else
                    {
                      message=split_by_dot[0]+'.'+split_by_dot[1];
                    }
                  }

                    $(".media-list").append('<li class="media chat-input"><div class="media-body"><div class="media"><div class="media-body">'+message+'</div></div></div></li>');
                        }

                if (message.split(".")[2])
                {message=message.split(".")[0];}
                
                $.ajax({
                    type: "POST",
                    url: "/ask",
                    data: $(this).serialize(),
                    success: function(response) {
                        $('#messageText').val('');
                        var answer = response.answer;
                        var heading_array=[];
                        
                        var time = new Date();
                        var timeString = ''+(time.getHours()) + ':' + (time.getMinutes());
                        
                        if (answer.split("")[0]=="2")
                        {
                            heading_array=answer.split("yolo");
                            const chatPanel = document.getElementById("chatPanel");
                            
                            for (var i=1;i<heading_array.length;i++)
                            {   h_arr=heading_array[i].split(' ').join('_');
                                var ch=''+Math.floor((Math.random() * 3) + 1);
                                var clas='button'+ch;
                                var new_filename='';
                                var split_by_bracket= heading_array[i].split('(');
                                var split_by_dot= heading_array[i].split('.');
                                if (split_by_bracket.length>1)
                                {
                                  new_filename=split_by_bracket[0];
                                }
                                else
                                {
                                  new_filename=split_by_dot[0]+'.'+split_by_dot[1];
                                }
                                $(".media-list").append('<li class="media flex-item"><span class="r"><div class="media-body"><div class="media"><div class="media-body"><button id="btn10" class="'+clas+' btn-topic1" value='+h_arr+'>'+new_filename+'</button></div></div></div></span></li>');
                    		        $(".fixed-panel").stop().animate({ scrollTop: $(".fixed-panel")[0].scrollHeight}, 1000);
                            }
                            $(".media-list").append('<li class="media flex-item"><span class="r"><div class="media-body"><div class="media"><div class="media-body"><button id="btn" class="btn-topic1 button4" value="BACK">Back</button></div></div></div></span></li>');
                            $(".fixed-panel").stop().animate({ scrollTop: $(".fixed-panel")[0].scrollHeight}, 1000);
                            
                            $('#chatbot-form-btn').prop('disabled',true);
                            $('#messageText').prop('disabled',true);
                        }
                        else if (answer.split("_here ")[0]=="log")
                        {   
                            heading_array=answer.split("log_here ")[1].split(" <br><br>");
                            var head_array=heading_array[0].split('<br>')
                            const chatPanel = document.getElementById("chatPanel");
                            for (var i=1;i<head_array.length-2;i++)
                            {   
                                var ch=''+Math.floor((Math.random() * 3) + 1);
                                var clas='button'+ch;
                                
                                var test=head_array[i]
                                var new_filename='';
                                
                                if (test.split('(').length==2)
                                {
                                  var delete_this=test.substring(test.indexOf('('),test.indexOf('x')+1);
                                  new_filename=test.replace(delete_this,'');
                                
                                }
                                else{
                                  var delete_this=test.substring(test.indexOf('.'),test.indexOf('x')+1);
                                  new_filename=test.replace(delete_this,'');
                                }
                                if (head_array[i].split('(').length==2)
                                {
                                  head_array[i]=(head_array[i].split('(')[0].split(' ').join('_'));
                                }
                                else
                                {
                                  head_array[i]=(head_array[i].split('.')[0]+head_array[i].split('.')[1]).split(' ').join('_');
                                
                                }
                                console.log(head_array[i]);
                                $(".media-list").append('<li class="media flex-item"><span class="r"><div class="media-body"><div class="media"><div class="media-body"><button id="btn10" class="'+clas+' btn-topic1" value='+head_array[i]+'>'+new_filename+'</button></div></div></div></span></li>');
                                $(".fixed-panel").stop().animate({ scrollTop: $(".fixed-panel")[0].scrollHeight}, 1000);
        					          }
                            
                            $(".media-list").append('<li class="media"><div class="media-body chat-output"><div class="media"><div class="media-body">Please enter your policy query or press "see all policies"</div></div></div></li>');
                            $(".media-list").append('<li class="media flex-item"><span class="r"><div class="media-body"><div class="media"><div class="media-body"><button id="btn1" class="btn-topic button5" value="see all policies">See all policies</button></div></div></div></span></li>');
                                $(".fixed-panel").stop().animate({ scrollTop: $(".fixed-panel")[0].scrollHeight}, 1000);
                            
    					          }
                        else if (answer.split("\'")[1]=="see all policies")
                        {   
                            heading_array=answer.split("'");
                            const chatPanel = document.getElementById("chatPanel");
                            $(".media-list").append('<li class="media"><div class="media-body"><div class="media"><div class="media-body">'+heading_array+'</div></div></div></li>');
                            $(".fixed-panel").stop().animate({ scrollTop: $(".fixed-panel")[0].scrollHeight}, 1000);
                            
                            $(".media-list").append('<li class="media flex-item"><span class="r"><div class="media-body"><div class="media"><div class="media-body"><button id="btn1" class="btn-topic button5" value="see all policies">See all policies</button></div></div></div></span></li>');
                            $(".fixed-panel").stop().animate({ scrollTop: $(".fixed-panel")[0].scrollHeight}, 1000);
                                
                        }    
                        else if (answer.split("logog.")[1]=="Yes")
                        {   
                            heading_array=answer.split("logog.");
                            const chatPanel = document.getElementById("chatPanel");
                            $(".media-list").append('<li class="media"><div class="media-body chat-output"><div class="media"><div class="media-body">'+heading_array[0]+'</div></div></div></li>');
                            $(".fixed-panel").stop().animate({ scrollTop: $(".fixed-panel")[0].scrollHeight}, 1000);
    							          $('#messageText').prop('disabled',true);
    							          $('#chatbot-form-btn').prop('disabled', true);
							
                            $(".media-list").append('<li class="media flex-item"><span class="r"><div class="media-body"><div class="media"><div class="media-body"><button id="btn1" class="btn-topic button5" value="yeah-see-logs">'+heading_array[1]+'</button></div></div></div></span></li>');
                    		    $(".fixed-panel").stop().animate({ scrollTop: $(".fixed-panel")[0].scrollHeight}, 1000);
								
                    		    $(".media-list").append('<li class="media flex-item"><span class="r"><div class="media-body"><div class="media"><div class="media-body"><button id="btn1" class="btn-topic button5" value="nah-dont-see-logs">'+heading_array[2]+'</button></div></div></div></span></li>');
                    		    $(".fixed-panel").stop().animate({ scrollTop: $(".fixed-panel")[0].scrollHeight}, 1000)    
                        }
                        else if(answer=="r_c"){

                        }
                        else if (answer.split("\'")[1]=="list")
                        {
                            heading_array=answer.split("\'");
                            const chatPanel = document.getElementById("chatPanel");

                            $(".media-list").append('<li class="media"><div class="media-body chat-output"><div class="media"><div class="media-body">'+answer+'</div></div></div></li>');
                            $(".fixed-panel").stop().animate({ scrollTop: $(".fixed-panel")[0].scrollHeight}, 1000);
                            $(".media-list").append('<li class="media flex-item"><span class="r"><div class="media-body"><div class="media"><div class="media-body"><button id="btn2" class="btn-topic button5" value="list">'+heading_array[1]+'</button></div></div></div></span></li>');
                    		    $(".fixed-panel").stop().animate({ scrollTop: $(".fixed-panel")[0].scrollHeight}, 1000);
                        }
                        else if (answer.split("\'")[1]=="Search")
                        {
							
                            heading_array=answer.split("\'");
                            const chatPanel = document.getElementById("chatPanel");
                            
                            $(".media-list").append('<li class="media"><div class="media-body chat-output"><div class="media"><div class="media-body">'+answer+'</div></div></div></li>');
                            $(".fixed-panel").stop().animate({ scrollTop: $(".fixed-panel")[0].scrollHeight}, 1000);
                            
                            $(".media-list").append('<li class="media flex-item"><span class="r"><div class="media-body"><div class="media"><div class="media-body"><button id="btn3" class="btn-topic button5" value="search">'+heading_array[1]+'</button></div></div></div></span></li>');
                    		    $(".fixed-panel").stop().animate({ scrollTop: $(".fixed-panel")[0].scrollHeight}, 1000);
                            
                            $(".media-list").append('<li class="media flex-item"><span class="r"><div class="media-body"><div class="media"><div class="media-body"><button id="btn3" class="btn-topic button5" value="get-text">'+heading_array[3]+'</button></div></div></div></span></li>');
                    		    $(".fixed-panel").stop().animate({ scrollTop: $(".fixed-panel")[0].scrollHeight}, 1000);                    		    
                                            
                        }
                        else if (answer=="Enter your email")
                        {   console.log("yolol")
                            const chatPanel = document.getElementById("chatPanel");
                            $(".media-list").append('<li class="media"><div class="media-body chat-output"><div class="media"><div class="media-body">'+answer+'</div></div></div></li>');
                            
                        }
                        
                        else if (answer.split("yolo.")[2]=="No")
                        {
                            heading_array=answer.split("yolo.");
                            heading_array[0]=heading_array[0].replace(/"/g,"");
                            bold_array=answer.split("b>");
                            var ba=bold_array[1];
                            var res = ba.slice(0, ba.length-2);
                            res=res.split(" ").join("_");
                            const chatPanel = document.getElementById("chatPanel");
                            var arr=heading_array[0].split(' ');
                            if (arr.length>70)
                            {   
                                var a=arr.slice(0, 70).join(' ');
                                var b= heading_array[3].split('/')
                                var head_arr=b[b.length-1].split(' ').join('_');
                                head_arr=head_arr.split('.')[0];
                                var more_data=heading_array[0].split(' ').join('_').split('<')[0];
                                
                                var tg="<span style='color:blue' onclick=More(\""+more_data+"\",\""+head_arr+"\",\""+res+"\")> More...</span>"
                                var res2=res.split("_").join(" ");
                                $(".media-list").append('<li id="extend_this" class="media"><div class="media-body chat-output"><div class="media"><div class="media-body"><div id="extend">'+a+tg+res2+'</div></div></div></div></li>');
                                $(".fixed-panel").stop().animate({ scrollTop: $(".fixed-panel")[0].scrollHeight}, 1000);
    							
                            }
                            else
                            {
                                $(".media-list").append('<li class="media"><div class="media-body chat-output"><div class="media"><div class="media-body">'+heading_array[0]+'</div></div></div></li>');
                                $(".fixed-panel").stop().animate({ scrollTop: $(".fixed-panel")[0].scrollHeight}, 1000);
      						          }	
                            $('#messageText').prop('disabled',true);
    							          $('#chatbot-form-btn').prop('disabled', true);
    							
                            $(".media-list").append('<li class="media flex-item"><span class="r"><div class="media-body"><div class="media"><div class="media-body"><button id="btn1" class="btn-topic button5" value="start-again">'+heading_array[1]+'</button></div></div></div></span></li>');
                    		    $(".fixed-panel").stop().animate({ scrollTop: $(".fixed-panel")[0].scrollHeight}, 1000);
								
                    		    $(".media-list").append('<li class="media flex-item"><span class="r"><div class="media-body"><div class="media"><div class="media-body"><button id="btn1" class="btn-topic button5" value="dont-start-again">'+heading_array[2]+'</button></div></div></div></span></li>');
                    		    $(".fixed-panel").stop().animate({ scrollTop: $(".fixed-panel")[0].scrollHeight}, 1000);
								
                            $(".media-list").append('<li class="media flex-item"><span class="r"><div class="media-body"><div class="media"><div class="media-body"><button id="btn" class="btn-topic button4" value="BACK">Back</button></div></div></div></span></li>');
                            $(".fixed-panel").stop().animate({ scrollTop: $(".fixed-panel")[0].scrollHeight}, 1000);
                            
                        }
                        else if (answer.split("yolo...")[2]=="No")
                        {
                            heading_array=answer.split("yolo...");
                            const chatPanel = document.getElementById("chatPanel");
                            var arr=heading_array[0].split(' ');
                            $(".media-list").append('<li class="media"><div class="media-body chat-output"><div class="media"><div class="media-body">'+heading_array[0]+'</div></div></div></li>');
                            $(".fixed-panel").stop().animate({ scrollTop: $(".fixed-panel")[0].scrollHeight}, 1000);
                            $('#messageText').prop('disabled',true);
                                $('#chatbot-form-btn').prop('disabled', true);
                                
                            $(".media-list").append('<li class="media flex-item"><span class="r"><div class="media-body"><div class="media"><div class="media-body"><button id="btn1" class="btn-topic button5" value="start-again">'+heading_array[1]+'</button></div></div></div></span></li>');
                            $(".fixed-panel").stop().animate({ scrollTop: $(".fixed-panel")[0].scrollHeight}, 1000);
                            
                            $(".media-list").append('<li class="media flex-item"><span class="r"><div class="media-body"><div class="media"><div class="media-body"><button id="btn1" class="btn-topic button5" value="dont-start-again">'+heading_array[2]+'</button></div></div></div></span></li>');
                            $(".fixed-panel").stop().animate({ scrollTop: $(".fixed-panel")[0].scrollHeight}, 1000);
                            
                            $(".media-list").append('<li class="media flex-item"><span class="r"><div class="media-body"><div class="media"><div class="media-body"><button id="btn" class="btn-topic button4" value="BACK">Back</button></div></div></div></span></li>');
                            $(".fixed-panel").stop().animate({ scrollTop: $(".fixed-panel")[0].scrollHeight}, 1000);
                            
                        }
                        else if (answer.split("yolo..")[2]=="No")
                        {
                            heading_array=answer.split("yolo..");
                            const chatPanel = document.getElementById("chatPanel");
                            $(".media-list").append('<li class="media"><div class="media-body chat-output"><div class="media"><div class="media-body">'+heading_array[0]+'</div></div></div></li>');
                            $(".fixed-panel").stop().animate({ scrollTop: $(".fixed-panel")[0].scrollHeight}, 1000);
              							$('#messageText').prop('disabled',true);
              							$('#chatbot-form-btn').prop('disabled', true);
              							
                            $(".media-list").append('<li class="media flex-item"><span class="r"><div class="media-body"><div class="media"><div class="media-body"><button id="btn1" class="btn-topic button5" value="export-logs">'+heading_array[1]+'</button></div></div></div></span></li>');
                    		    $(".fixed-panel").stop().animate({ scrollTop: $(".fixed-panel")[0].scrollHeight}, 1000);
								
                    		    $(".media-list").append('<li class="media flex-item"><span class="r"><div class="media-body"><div class="media"><div class="media-body"><button id="btn1" class="btn-topic button5" value="dont-export-logs">'+heading_array[2]+'</button></div></div></div></span></li>');
                    		    $(".fixed-panel").stop().animate({ scrollTop: $(".fixed-panel")[0].scrollHeight}, 1000);
								
                        }
                        
                        else
                        {
    						            const chatPanel = document.getElementById("chatPanel");  
    								
                            $('#messageText').prop('disabled',false);
                            $('#chatbot-form-btn').prop('disabled', false);


								
                            if (message!="yeah" && message!="BACK" && message!="nah" &&message!="dont-start-again" && message!="start-again" && message!="yeah-see-logs" && message!="nah-dont-see-logs")
                            {       
                    							$('#messageText').prop('disabled',false);
                    							$('#chatbot-form-btn').prop('disabled', false);
                                           
                                  $(".media-list").append('<li class="media"><div class="media-body chat-output"><div class="media"><div class="media-body">' + message + '</div></div></div></li>');
                                   
                            }
                            
              							$('#chatbot-form-btn').prop('disabled', false);
              							$('#messageText').prop('disabled',false);
                                  
                             $(".media-list").append('<li class="media"><div class="media-body chat-output"><div class="media"><div class="media-body">' + answer + '</div></div></div></li>');
                             $('#messageText').prop('disabled',false);
                             $('#chatbot-form-btn').prop('disabled', false);
                             $(".fixed-panel").stop().animate({ scrollTop: $(".fixed-panel")[0].scrollHeight}, 1000);
                		    }
                    },
                    error: function(error) {
                        console.log(error);
                    }
                });
            });
        });
        </script>
    </body>
</html>